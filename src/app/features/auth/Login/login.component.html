<div class="login-wrapper">
  <div class="login-container">
    <p-card class="login-card">
      <ng-template pTemplate="header">
        <div class="login-header">
          <h1>Iniciar Sesi칩n</h1>
          <p class="login-subtitle">Ingresa tus credenciales para acceder</p>
        </div>
      </ng-template>

      <form [formGroup]="form" (ngSubmit)="submit()" class="login-form">
        @if (error) {
        <p-message severity="error" [text]="error" [closable]="true" (onClose)="error = null" styleClass="login-error">
        </p-message>
        }

        <div class="form-field">
          <label for="username" class="field-label">
            Usuario
          </label>
          <span class="p-input-icon-left" style="width: 100%;">
            <input id="username" type="text" pInputText formControlName="username"
              [class.ng-invalid]="form.get('username')?.invalid && form.get('username')?.touched"
              style="width: 100%;" />
          </span>
          @if (form.get('username')?.invalid && form.get('username')?.touched) {
          <small class="p-error">
            El usuario es requerido
          </small>
          }
        </div>

        <div class="form-field">
          <label for="accesKey" class="field-label">
            Contrase침a
          </label>
          <span class="p-input-icon-left" style="width: 100%;">
            <p-password id="accesKey" formControlName="accesKey" [toggleMask]="true"
              [feedback]="false" [class.ng-invalid]="form.get('accesKey')?.invalid && form.get('accesKey')?.touched"
              styleClass="full-width" inputStyleClass="full-width">
            </p-password>
          </span>
          @if (form.get('accesKey')?.invalid && form.get('accesKey')?.touched) {
          <small class="p-error">
            La contrase침a es requerida
          </small>
          }
        </div>

        <div class="form-actions">
          <p-button type="submit" label="Entrar" icon="pi pi-sign-in" [disabled]="form.invalid || loading"
            styleClass="login-button">
          </p-button>
        </div>
      </form>
    </p-card>
  </div>

  <p-dialog header="Validaci칩n" [(visible)]="showValidationModal" [modal]="true" [closable]="false"
    [closeOnEscape]="false" [style]="{ width: '380px' }" [draggable]="false" [resizable]="false"
    [contentStyle]="{ 'text-align': 'center', 'padding': '1.5rem' }">
    <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
      <p-progressSpinner [style]="{ width: '40px', height: '40px' }" strokeWidth="4"></p-progressSpinner>
      <span style="font-size: 1.1rem;">Validando, acceso al turno!</span>
    </div>
  </p-dialog>
</div>